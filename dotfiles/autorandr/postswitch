#!/usr/bin/env bash

PROFILE="$(autorandr --current)"

case "$PROFILE" in
    laptopOnly)
        # 1) Merge the 1080p Xresources
        xrdb -merge ~/.Xresources-1080p

        # 2) GTK scaling for laptop (1×)
        if command -v xfconf-query >/dev/null 2>&1; then
            xfconf-query --channel xsettings --property /Gdk/WindowScalingFactor --set 1
        fi

        # 3) Qt scaling
        export QT_AUTO_SCREEN_SCALE_FACTOR=0
        export QT_SCALE_FACTOR=1
        ;;

    fourKSetup)
        # 1) Merge the 4K Xresources
        xrdb -merge ~/.Xresources-4k

        # 2) GTK scaling for 4K (2×)
        if command -v xfconf-query >/dev/null 2>&1; then
            xfconf-query --channel xsettings --property /Gdk/WindowScalingFactor --set 2
        fi

        # 3) Qt scaling
        export QT_AUTO_SCREEN_SCALE_FACTOR=0
        export QT_SCALE_FACTOR=2
        ;;

    *)
        echo "No recognized autorandr profile: '$PROFILE'"
        ;;
esac

# Optional: send a desktop notification or log message
notify-send "autorandr switched" "Now using profile: $PROFILE"
